{% include latest_blog_post.html %}

{% assign current = page.url | downcase | split: '/' %}

<header role="banner">
    <nav class="navbar navbar-expand-sm navbar-dark fixed-top bg-dark justify-content-between">
        {% if page.url == "/index.html" or page.url == "/" %}
            {% assign visibility = "hidden" %}
        {% else %}
            {% assign visibility = "visible" %}
        {% endif %}

        <a class="navbar-brand" href="{{home}}/" style="visibility: {{visibility}}">
            <img class="logo" src="{{home}}/img/istio-logo.svg" alt="Istio Logo"/>
            {% if site.data.istio.archive %}
                <span class="brand-name">Istioldie {{site.data.istio.version}}</span>
            {% elsif site.data.istio.preliminary %}
                <span class="brand-name">Istio Prelim {{site.data.istio.version}}</span>
            {% else %}
                <span class="brand-name">Istio {{site.data.istio.version}}</span>
            {% endif %}
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-end" id="navbarCollapse">
            <ul id="navbar-links" class="navbar-nav active">
                <li class="nav-item">
                    <a class="nav-link {% if current[1] == 'docs' %}active{% endif %}" href="{{home}}/docs/">Docs</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if current[1] == 'blog' %}active{% endif %}" href="{{latest_blog_post}}">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if current[1] == 'help' %}active{% endif %}" href="{{home}}/help/">Help</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if current[1] == 'community.html' %}active{% endif %}" href="{{home}}/community.html">Community</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if current[1] == 'about' %}active{% endif %}" href="{{home}}/about/">About</a>
                </li>

                <li class="nav-item dropdown" id="gearDropdown" style="white-space: nowrap">
                    <a href="" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i style="width: 1em" class='fa fa-lg fa-cog'></i>
                    </a>

                    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="gearDropdown">

                        <h6 class="dropdown-header">Other versions of this site</h6>

                        {% assign next = site.data.versions.preliminary %}
                        {% assign current = site.data.versions.main %}

                        <li>
                            <a href="https://istio.io">Current Release ({{current}})</a>
                        </li>
                        <li>
                            <a href="https://preliminary.istio.io">Next Release (Preliminary {{next}})</a>
                        </li>
                        <li>
                            <a href="https://archive.istio.io">Older Releases</a>
                        </li>

                        <li class="dropdown-divider"></li>

                        <li>
                            <i class='fa fa-check light'></i>
                            <a href="" onclick="setActiveStyleSheet('light');return false;">Light Theme</a>
                        </li>

                        <li>
                            <i class='fa fa-check dark'></i>
                            <a href="" onclick="setActiveStyleSheet('dark');return false;">Dark Theme</a>
                        </li>

                        <li class="dropdown-divider"></li>

                        <li><a href="https://github.com/istio/istio.github.io/issues/new?title=Issue with {{page.path}}">Report Site Bugs</a></li>
                        <li><a href="https://github.com/istio/istio.github.io/edit/master/{{page.path}}">Edit this Page on GitHub</a></li>
                   </ul>
                </li>

                <li class="nav-item">
                    <a id="search_show" class="nav-link" href=""><i style="width: 1em" class="fa fa-lg fa-search"></i></a>
                </li>
            </ul>

            <form name="cse" id="search_form" class="form-inline mr-sm-2" role="search">
                <input type="hidden" name="cx" value="{{site.data.istio.search_engine_id}}" />
                <input type="hidden" name="ie" value="utf-8" />
                <input type="hidden" name="hl" value="en" />
                <input id="search_textbox" class="form-control" name="q" type="text" />
                <button id="search_close" type="reset"><i class="far fa-lg fa-times-circle"></i></button>
            </form>
        </div>
    </nav>
</header>
